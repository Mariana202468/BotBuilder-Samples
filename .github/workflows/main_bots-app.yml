# Docs for the Azure Web Apps Deploy action: https://github.com/Azure/webapps-deploy
# More GitHub Actions for Azure: https://github.com/Azure/actions

name: Build & Deploy Echo Bot to Azure Web App

on:

  push:

    branches: [ "main" ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:

    - name: Checkout repo

      uses: actions/checkout@v4

    - name: Set working dir to sample

      run: cd samples/javascript_nodejs/02.echo-bot

    - name: Setup Node

      uses: actions/setup-node@v4

      with:

        node-version: 22-lts

    - name: Install dependencies

      run: npm install

    - name: Zip site

      run: zip -r site.zip .

    - name: Upload artifact

      uses: actions/upload-artifact@v4

      with:

        name: site

        path: site.zip

  deploy:

    runs-on: ubuntu-latest

    needs: build

    steps:

    - name: Download artifact

      uses: actions/download-artifact@v4

      with:

        name: site

    - name: Unzip site

      run: unzip site.zip

    - name: Deploy to Azure Web App

      uses: azure/webapps-deploy@v2

      with:

        app-name: Bots-app          # ← pon AQUÍ el nombre EXACTO de tu Web App

        slot-name: Production

        package: .
 
